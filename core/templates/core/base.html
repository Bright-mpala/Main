{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}Donate{% endblock %}</title>
 <link rel="apple-touch-icon" sizes="180x180" href="{% static 'core/images/favicon/apple-touch-icon.png' %}">
  <link rel="icon" type="image/png" sizes="32x32" href="{% static 'core/images/favicon/favicon-32x32.png' %}">
  <link rel="icon" type="image/png" sizes="16x16" href="{% static 'core/images/favicon/favicon-16x16.png' %}">
  <link rel="manifest" href="{% static 'core/images/favicon/site.webmanifest' %}">
  <link rel="mask-icon" href="{% static 'core/images/favicon/safari-pinned-tab.svg' %}" color="#5bbad5">
  <link rel="shortcut icon" href="{% static 'core/images/favicon/favicon.ico' %}">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="{% static 'core/images/favicon/browserconfig.xml' %}">
  <meta name="theme-color" content="#ffffff">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
   <link rel="stylesheet" href="{% static 'core/css/style.css' %}" />
 


</head>
<body>
  <a href="#main-content" class="visually-hidden visually-hidden-focusable">Skip to main content</a>

  {% if notifications %}
  <div class="bg-warning text-dark p-2 text-center small" style="position: relative; z-index: 9999;">
    {% for notif in notifications %}
      <div id="notif-{{ notif.id }}" class="d-flex justify-content-between align-items-center px-2">
        <span>{{ notif.message }}</span>
        <button class="btn-close btn-close-white" aria-label="Close" onclick="markAsRead('{{ notif.id }}')"></button>
      </div>
    {% endfor %}
  </div>
  {% endif %}

  <header class="navbar-container">
    <div class="container">
      <nav class="navbar navbar-expand-lg">
        <a class="navbar-brand" href="{% url 'index' %}">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
          Dr Shoko
        </a>
        
        <button class="navbar-toggler" type="button" aria-label="Toggle navigation" aria-expanded="false" aria-controls="navbarContent">
          <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="navbar-backdrop"></div> <!-- Moved here, outside collapse -->
<div class="navbar-collapse" id="navbarContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            {% if user.is_authenticated and approved_projects_count > 0 %}
              <li class="nav-item">
                <a class="nav-link" href="{% url 'project_workspace_list' %}">Project Workspace</a>
              </li>
            {% endif %}
            <li class="nav-item">
              <a class="nav-link {% if request.path == '/' %}active{% endif %}" href="{% url 'index' %}">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if 'projects' in request.path %}active{% endif %}" href="{% url 'projects' %}">Projects</a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if 'events' in request.path %}active{% endif %}" href="{% url 'events' %}">Events</a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if 'about' in request.path %}active{% endif %}" href="{% url 'about' %}">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if 'blog' in request.path %}active{% endif %}" href="{% url 'blog' %}">Blogs</a>
            </li>
            <li class="nav-item">
             <a class="nav-link {% if request.resolver_match.namespace == 'counseling' %}active{% endif %}"href="{% url 'counseling:counselling_home' %}"> Counselling sessions</a>

          </ul>
          
          <ul class="navbar-nav ms-auto">
            {% if user.is_authenticated %}
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle d-flex align-items-center gap-2" href="#" id="userDropdown" role="button"
                   data-bs-toggle="dropdown" aria-expanded="false">
                  <span class="user-initial">{{ user.first_name|default:user.username|slice:":1"|upper }}{{ user.last_name|default:user.username|slice:":1"|upper }}</span>
                  <span class="d-none d-lg-inline">{{ user.first_name|default:user.username }}</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                  <li><a class="dropdown-item" href="{% url 'account_logout' %}"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                </ul>
              </li>
            {% else %}
              <li class="nav-item">
                <a class="nav-link" href="{% url 'account_login' %}">Login</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'account_signup' %}">Sign Up</a>
              </li>
            {% endif %}
            <li class="nav-item ms-lg-2">
              <a href="{% url 'donate' %}" class="donate-btn nav-link">Donate</a>
            </li>
          </ul>
        </div>
      </nav>
    </div>
  </header>

  <main id="main-content">
    {% block content %}
    {% endblock %}
  </main>

  <footer><div class="footer-container">
    <div class="footer-section">
      <h4>Contact</h4>
      <ul>
        <li><a href="mailto:jane@example.com">Email: jane@example.com</a></li>
        <li><a href="#">LinkedIn</a></li>
      </ul>
    </div>
    <div class="footer-section">
      <h4>Quick Links</h4>
      <ul>
        <li><a href="{% url 'index' %}">Home</a></li>
        <li><a href="{% url 'donate' %}">Donate</a></li>
        <li><a href="{% url 'contact' %}">Contact</a></li>
        <li><a href="{% url 'blog' %}">Blog</a></li>
        <li><a href="{% url 'projects' %}">Projects</a></li>
        <li><a href="{% url 'about' %}">About</a></li>
      </ul>
    </div>
    <div class="footer-section">
      <h4>Follow Me</h4>
      <ul>
        <li><a href="#">Twitter</a></li>
        <li><a href="#">GitHub</a></li>
      </ul>
    </div>
  </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Mobile menu toggle
      const navbarToggler = document.querySelector('.navbar-toggler');
      const navbarCollapse = document.querySelector('.navbar-collapse');
      const navbarBackdrop = document.querySelector('.navbar-backdrop');
      
      navbarToggler.addEventListener('click', function() {
        const isExpanded = this.getAttribute('aria-expanded') === 'true';
        this.setAttribute('aria-expanded', !isExpanded);
        navbarCollapse.classList.toggle('show');
        navbarBackdrop.classList.toggle('show');
        document.body.style.overflow = isExpanded ? '' : 'hidden';
      });
      
      navbarBackdrop.addEventListener('click', function() {
        navbarToggler.setAttribute('aria-expanded', 'false');
        navbarCollapse.classList.remove('show');
        this.classList.remove('show');
        document.body.style.overflow = '';
      });
      
      // Close mobile menu when clicking on a nav link
      document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', () => {
          if (window.innerWidth <= 991.98) {
            navbarToggler.setAttribute('aria-expanded', 'false');
            navbarCollapse.classList.remove('show');
            navbarBackdrop.classList.remove('show');
            document.body.style.overflow = '';
          }
        });
      });
      
      // Mark notification as read
      window.markAsRead = function(notificationId) {
        fetch("{% url 'mark_notification_read' %}", {
          method: 'POST',
          headers: {
            'X-CSRFToken': '{{ csrf_token }}',
            'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: `id=${notificationId}`,
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            const notifEl = document.getElementById(`notif-${notificationId}`);
            if (notifEl) notifEl.style.display = 'none';
          }
        });
      }
    });
  </script>
</body>
</html>